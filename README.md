# Проект "Учет финансов"

Проект представляет собой консольное приложение для учета личных финансов. Оно позволяет управлять счетами, категориями и операциями, анализировать доходы и расходы, а также экспортировать/импортировать данные.

---

## Архитектура проекта

### 1. Использованные паттерны GoF

| Паттерн              | Модуль/Классы                          | Важность и обоснование                                                                 |
|----------------------|----------------------------------------|----------------------------------------------------------------------------------------|
| **Factory Method**   | `ImportExport/ImportExportFactory`     | Позволяет создавать экспортеры/импортеры без явного указания типа, упрощает расширение |
| **Repository**       | `Repositories/*Repository`             | Инкапсулирует доступ к данным, обеспечивает единую точку управления сущностями         |
| **Decorator**        | `Statistics/TimedServiceDecorator`     | Добавляет функциональность (замер времени) без изменения основного кода                |
| **Adapter**          | `ImportExport/*Importer/Exporter`      | Адаптирует данные из разных форматов (CSV/JSON/YAML) к доменной модели                 |
| **Strategy**         | `Analytics/CategoryGroupingStrategy`   | Позволяет менять алгоритмы группировки операций динамически                            |
| **Unit of Work**     | `Repositories/UnitOfWork`              | Управляет транзакциями и согласованностью данных между репозиториями                   |
| **Observer**         | `Services/BalanceRecalculationService` | Автоматически пересчитывает баланс при изменении операций                              |

---

### 2. Реализованные принципы SOLID

| Принцип                   | Реализация                                                                 | Примеры классов/модулей                             |
|---------------------------|----------------------------------------------------------------------------|-----------------------------------------------------|
| **Single Responsibility** | Каждый класс решает одну задачу                                            | `FinancialAnalyticsService`, `CsvExporter`          |
| **Open/Closed**           | Новые форматы экспорта добавляются через новые классы, а не изменение кода | `JsonExporter`, `YamlImporter`                      |
| **Liskov Substitution**   | Наследники `IRepository` полностью заменяют базовый интерфейс              | `AccountRepository`, `CategoryRepository`           |
| **Interface Segregation** | Узкие интерфейсы (`IDataExporter`, `IDataImporter`)                        | `ImportExport` модуль                               |
| **Dependency Inversion**  | Зависимости внедряются через интерфейсы                                    | `BalanceRecalculationService`, `FinancialService`   |

---

### 3. Принципы GRASP

| Принцип                | Реализация                                                                | Примеры классов/модулей                             |
|------------------------|---------------------------------------------------------------------------|-----------------------------------------------------|
| **High Cohesion**      | Логика аналитики изолирована в `FinancialAnalyticsService`                | `Analytics` модуль                                  |
| **Low Coupling**       | Классы моделей не зависят от репозиториев                                 | `BankAccount`, `Operation`                          |
| **Information Expert** | `BalanceRecalculationService` знает, как пересчитывать баланс             | `Services/BalanceRecalculationService`              |
| **Creator**            | `UnitOfWork` создает и управляет репозиториями                            | `Repositories/UnitOfWork`                           |

---

### 4. Архитектурные компоненты

| Компонент            | Назначение                                                              | Ключевые классы                                     |
|----------------------|-------------------------------------------------------------------------|-----------------------------------------------------|
| **Domain Model**     | Представление бизнес-сущностей                                          | `Models/BankAccount`, `Models/Operation`            |
| **Data Access**      | Работа с данными через репозитории                                      | `Repositories/*Repository`                          |
| **Services**         | Бизнес-логика (аналитика, пересчет балансов)                            | `Services/*Service`                                 |
| **Infrastructure**   | Вспомогательные функции (импорт/экспорт, статистика)                    | `ImportExport/*`, `Statistics/*`                    |

---

## Инструкция по запуску

### 1. Требования
- Установите [.NET 8 SDK](https://dotnet.microsoft.com/download).
- Установите IDE (Visual Studio 2022/Rider/VSCode).

### 2. Сборка
```bash
dotnet restore
dotnet build
```

### 3. Запуск
```bash
dotnet run --project HSEBankApp.ConsoleUI
```

### 4. Тестовые данные
При первом запуске автоматически создаются:

**Счет**: "Основной"

**Категории**: "Зарплата" (доход), "Продукты" (расход)

**Операция**: Зарплата 100,000 руб.

### 5. Демонстрация
Используйте меню для:

**Создания счетов/категорий**

**Добавления операций**

**Экспорта и импорта данных из файлов**

**Просмотра аналитики**

## Обоснование выбора паттернов
**`Factory Method и Adapter`**:
Позволили гибко работать с разными форматами данных. Добавление нового формата (например, XML) потребует только создания нового класса-обработчика.

**`Decorator и Strategy`**:
Сделали систему расширяемой. Например, можно добавить новую стратегию группировки по месяцам или декоратор для кеширования.

**`Unit of Work и Repository`**:
Обеспечили согласованность данных и упростили тестирование. Замена источника данных (например, с in-memory на БД) потребует минимальных изменений.


## Unit тесты
**`OperationRepositoryTests`**
**`CategoryGroupingStrategyTests`**
**`JsonImporterTests`**
**`BalanceRecalculationServiceTests`**